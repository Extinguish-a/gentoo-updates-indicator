<schemalist gettext-domain="gentoo-updates-indicator">
  <schema id="org.gnome.shell.extensions.gentoo-updates-indicator"
      path="/org/gnome/shell/extensions/gentoo-updates-indicator/">

    <key type="i" name="boot-wait">
        <default>15</default>
        <summary>Time to wait before first check (seconds)</summary>
        <description>A first check is made this number of seconds after startup</description>
        <range min="5" max="5000"/>
    </key>

    <key type="i" name="check-interval">
        <default>60</default>
        <summary>Interval between updates check (minutes)</summary>
        <description>Time to wait between two automatic checks</description>
        <range min="5" max="2000"/>
    </key>

    <key name="always-visible" type="b">
      <default>true</default>
        <summary>Indicator is always visble</summary>
        <description>
            If true, the indicator is always visible, even when non updates are pending
        </description>
    </key>

    
    <key name="show-count" type="b">
      <default>true</default>
        <summary>Show updates count on indicator</summary>
        <description>
            If true, the indicator will display the number of updates pending
        </description>
    </key>

    <key name="notify" type="b">
      <default>false</default>
        <summary>Send a notification when new updates are available</summary>
        <description>Send a notification when new updates are available</description>
    </key>

    <key name="howmuch" type="i">
      <default>0</default>
        <summary>How much information to show on notifications</summary>
        <description>0:count, 1:list</description>
    </key>

    <key name="check-cmd" type="s">
      <default>"/bin/sh -c \"emerge -puDN @world 2>/dev/null | awk '/\\[ebuild/ &amp;&amp; $0 ~ /U/ { if (match($0, /\\[ebuild[^\\]]*\\]\\s+([^ ]+)\\s+\\[([^\\]]+)\\]/, a)) { new=a[1]; old=a[2]; atom=new; sub(/:[^ ]+$/, \\\"\\\" , atom); newver=new; sub(/^.*-/, \\\"\\\" , newver); sub(/:.*/, \\\"\\\" , newver); oldver=old; sub(/:.*/, \\\"\\\" , oldver); pkg=atom; sub(/-[^-]+$/, \\\"\\\" , pkg); printf(\\\"%s %s -> %s\\\\n\\\", pkg, oldver, newver); } }'\""</default>
      <summary>Command to run to check for updated packages.</summary>
      <description>Command to run to check for updated packages.</description>
    </key>

    <key name="update-cmd" type="s">
      <default>"gnome-terminal -- /bin/sh -c \"sudo emerge -avuDN @world ; echo Done - Press enter to exit; read _\" "</default>
      <summary>Command to run to update packages.</summary>
      <description>Command to run to update packages.</description>
    </key>

    <key name="portage-dir" type="s">
      <default>"/var/db/pkg"</default>
        <summary>Portage directory to monitor</summary>
        <description></description>
    </key>

    <key name="strip-versions" type="b">
      <default>false</default>
        <summary>Remove version numbers in the updates list</summary>
        <description></description>
    </key>

    <key name="strip-versions-in-notification" type="b">
      <default>true</default>
        <summary>Remove version numbers in notifications</summary>
        <description></description>
    </key>

    <key name="disable-parsing" type="b">
      <default>false</default>
        <summary>Disable output parsing to tell updates from titles and pretty display</summary>
        <description></description>
    </key>

    <key name="auto-expand-list" type="i">
      <default>0</default>
        <summary>Auto-open list submenu when updates count is lower than this number</summary>
        <description></description>
        <range min="0" max="100"/>
    </key>

    <key name="package-manager" type="s">
      <default>""</default>
      <summary>Command to run to open package manager.</summary>
      <description></description>
    </key>

    <key name="preferred-terminal" type="s">
      <default>"gnome-terminal"</default>
      <summary>Preferred terminal preset</summary>
      <description>One of: gnome-terminal, tilix, terminator, kitty, alacritty, foot, custom.</description>
    </key>

    <key name="auto-open-terminal" type="b">
      <default>false</default>
      <summary>Automatically open terminal when new updates appear</summary>
      <description>When true, runs the update command automatically the first time new updates are detected.</description>
    </key>

    <key name="sync-cmd" type="s">
      <default>"gnome-terminal -- /bin/sh -c \"sudo emaint sync -a ; echo Done - Press enter to exit; read _\" "</default>
      <summary>Command to sync Portage repositories.</summary>
      <description>Used by the “Sync Portage now” menu item.</description>
    </key>

    <key name="sync-schedule-enabled" type="b">
      <default>false</default>
      <summary>Enable scheduled Portage sync</summary>
      <description>When true, the sync command is run periodically.</description>
    </key>

    <key name="sync-interval-value" type="i">
      <default>24</default>
      <summary>Interval value for scheduled sync</summary>
      <description>Number of units between syncs.</description>
      <range min="1" max="720"/>
    </key>

    <key name="sync-interval-unit" type="s">
      <default>"hours"</default>
      <summary>Interval unit for scheduled sync</summary>
      <description>One of: hours, days.</description>
    </key>

    <key name="sync-fixed-enabled" type="b">
      <default>false</default>
      <summary>Enable fixed daily sync time</summary>
      <description>When true, sync runs every day at a fixed local time.</description>
    </key>

    <key name="sync-fixed-hour" type="i">
      <default>3</default>
      <summary>Hour of day for fixed sync</summary>
      <description>0–23 local time.</description>
      <range min="0" max="23"/>
    </key>

    <key name="sync-fixed-minute" type="i">
      <default>0</default>
      <summary>Minute of hour for fixed sync</summary>
      <description>0–59.</description>
      <range min="0" max="59"/>
    </key>

    <key name="rebuild-cmd" type="s">
      <default>"gnome-terminal -- /bin/sh -c \"sudo emerge -e -av @world ; echo Done - Press enter to exit; read _\" "</default>
      <summary>Command to rebuild world</summary>
      <description>Used by the “Rebuild World now” menu item.</description>
    </key>

    <key name="enable-positioning" type="b">
      <default>false</default>
      <summary>Enable setting position in the panel</summary>
      <description>True to enable</description>
    </key>

    <key name="position" type="i">
      <default>2</default>
      <summary>Position in the panel</summary>
      <description>Position where the updates indicator will be displayed (left/center/right)</description>
    </key>

    <key name="position-number" type="i">
      <default>-0</default>
      <summary>Position of the updates indicator inside the box</summary>
      <description></description>
    </key>

    <key name="package-info-cmd" type="s">
      <default>"xdg-open https://packages.gentoo.org/packages/%1$s"</default>
      <summary>Command to show info for a package.</summary>
      <description>String template; uses the package atom as attribute.</description>
    </key>

    <key name="linkify-menu" type="b">
      <default>true</default>
      <summary>Underline updates as links</summary>
      <description></description>
    </key>

    <key name="show-timechecked" type="b">
      <default>true</default>
        <summary>Show last check date and time</summary>
        <description>
            If true, date/time of last check is added in the menu
        </description>
    </key>

  </schema>
</schemalist>
